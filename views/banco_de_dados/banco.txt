-- JOBTRUCKER PROJETO INTEGRADOR

CREATE DATABASE JOBTRUCKER

USE JOBTRUCKER

CREATE TABLE TIPO_USUARIO (
	SEQUENCIA INT(1) NOT NULL AUTO_INCREMENT,
	DESCRICAO VARCHAR(40) NOT NULL,
	PRIMARY KEY(SEQUENCIA)
)

-- INSERT TIPO_USUARIO
INSERT INTO JOBTRUCKER.TIPO_USUARIO(SEQUENCIA, DESCRICAO)
	VALUES(1, 'CAMINHONEIRO');

INSERT INTO JOBTRUCKER.TIPO_USUARIO(SEQUENCIA, DESCRICAO)
	VALUES(2, 'EMPESA');

CREATE TABLE USUARIO (
	SEQ_USUARIO INT(3) NOT NULL AUTO_INCREMENT,
	NOME VARCHAR(60) NOT NULL,
	EMAIL VARCHAR(50) NOT NULL,
	CPF VARCHAR(11) NOT NULL,
	SENHA VARCHAR(300) NOT NULL,
	DECRICAO VARCHAR(100),
	CELULAR INT(12),
	IDADE INT(2),
	TIPO_USUARIO INT(1) NOT NULL,
	ATIVO VARCHAR(1) DEFAULT 'S' NOT NULL,
	PRIMARY KEY (SEQ_USUARIO),
	FOREIGN KEY (TIPO_USUARIO) REFERENCES TIPO_USUARIO(SEQUENCIA)
)

CREATE TABLE EMPRESA (
	SEQ_EMPRESA INT(3) NOT NULL AUTO_INCREMENT,
	NOME VARCHAR(60) NOT NULL,
	EMAIL VARCHAR(50) NOT NULL,
	CNPJ VARCHAR(14) NOT NULL,
	SENHA VARCHAR(300) NOT NULL,
	DESCRICAO VARCHAR(100),
	CEP VARCHAR(9),
	NUMERO INT(5),
	TIPO_USUARIO INT(1) NOT NULL,
	ATIVO VARCHAR(1) DEFAULT 'S' NOT NULL,
	PRIMARY KEY(SEQ_EMPRESA),
	FOREIGN KEY (TIPO_USUARIO) REFERENCES TIPO_USUARIO(SEQUENCIA)
)

CREATE TABLE ESTADO (
	SEQ_ESTADO INT(3) NOT NULL AUTO_INCREMENT,
	NOME VARCHAR(50) NOT NULL,
	SIGLA VARCHAR(5) NOT NULL,
	PRIMARY KEY(SEQ_ESTADO)
)

CREATE TABLE CIDADE (
	SEQ_CIDADE INT(3) NOT NULL AUTO_INCREMENT,
	NOME VARCHAR(50) NOT NULL,
	COD_ESTADO INT(3) NOT NULL,
	PRIMARY KEY (SEQ_CIDADE),
	FOREIGN KEY (COD_ESTADO) REFERENCES ESTADO(SEQ_ESTADO)
)


CREATE TABLE CADASTRAR_CARGA (
	SEQ_CARGA INT(5) NOT NULL AUTO_INCREMENT,
	NOME VARCHAR(50) NOT NULL,
	EMPRESA_CADASTROU INT(3) NOT NULL,
	EMPRESA_DESTINO INT(3) NOT NULL,
	DATA_REGISTRO DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP,
	DATA_ENTREGA DATETIME,
	DATA_SAIDA DATETIME,
	CONTEUDO_CARGA VARCHAR(60),
	ESTADO_INICIAL INT(3) NOT NULL,
	CIDADE_INICIAL INT(3) NOT NULL,
	ESTADO_FINAL INT(3) NOT NULL,
	CIDADE_FINAL INT(3) NOT NULL,
	LARGURA INT(4) NOT NULL,
	ALTURA INT(4) NOT NULL,
	PRECO INT(10) NOT NULL,
	PESO INT(5) NOT NULL,
	DESCRICAO VARCHAR(300),
	CARGA_ACEITA VARCHAR(1) NOT NULL DEFAULT 'N',
	PRIMARY KEY (SEQ_CARGA),
	FOREIGN KEY (EMPRESA_CADASTROU) REFERENCES EMPRESA(SEQ_EMPRESA),
	FOREIGN KEY (EMPRESA_DESTINO) REFERENCES EMPRESA(SEQ_EMPRESA),
	FOREIGN KEY (ESTADO_INICIAL) REFERENCES ESTADO(SEQ_ESTADO),
	FOREIGN KEY (CIDADE_INICIAL) REFERENCES CIDADE(SEQ_CIDADE),
	FOREIGN KEY (ESTADO_FINAL) REFERENCES ESTADO(SEQ_ESTADO),
	FOREIGN KEY (CIDADE_FINAL) REFERENCES CIDADE(SEQ_CIDADE)
)

CREATE TABLE CADASTRAR_CAMINHAO(
	SEQ_CAMINHAO INT(5) NOT NULL AUTO_INCREMENT,
	DONO_CAMINHAO INT(3) NOT NULL,
	PLACA_CAMINHAO VARCHAR(7) NOT NULL,
	PLACA_CARRETA VARCHAR(7),
	MODELO_CARRETA VARCHAR(50),
	MODELO_CAMINHAO VARCHAR(50) NOT NULL,
	DESCRICAO VARCHAR(300),
	PRIMARY KEY(SEQ_CAMINHAO),
	FOREIGN KEY (DONO_CAMINHAO) REFERENCES USUARIO(SEQ_USUARIO)
)

CREATE TABLE PEDIDO (
	SEQ_PEDIDO INT(5) NOT NULL AUTO_INCREMENT,
	SEQ_CARGA INT(5) NOT NULL,
	SEQ_EMPRESA INT(3) NOT NULL,
	USUARIO_SOLICITOU INT(3) NOT NULL,
	EMPRESA_ACEITOU VARCHAR(1) DEFAULT 'N' NOT NULL,
	PRIMARY KEY(SEQ_PEDIDO),
	FOREIGN KEY(SEQ_CARGA) REFERENCES CADASTRAR_CARGA(SEQ_CARGA),
	FOREIGN KEY(SEQ_EMPRESA) REFERENCES EMPRESA(SEQ_EMPRESA),
	FOREIGN KEY(USUARIO_SOLICITOU) REFERENCES USUARIO(SEQ_USUARIO)
) 


-- INSERT ESTADO 
INSERT INTO ESTADO (NOME, SIGLA) 
	VALUES('SÃO PAULO', 'SP'),('RIO DE JANEIRO', 'RJ'),('MINAS GERAIS', 'MG'),('BAHIA', 'BA'),('PERNAMBUCO', 'PE');

-- INSERT DAS CIDADES DE SÃO PAULO
INSERT INTO CIDADE (NOME, COD_ESTADO) 
	VALUES('SÃO PAULO', 1),('CAMPINAS', 1),('SANTOS', 1);

-- INSERT DAS CIDADES DO RIO DE JANEIRO
INSERT INTO CIDADE (NOME, COD_ESTADO) 
	VALUES('RIO DE JANEIRO', 2),('NITERÓI', 2),('NOVA IGUAÇU', 2);

-- INSERT DAS CIDADES DE MINAS GERAIS
INSERT INTO CIDADE (NOME, COD_ESTADO) 
	VALUES('BELO HORIZONTE', 3),('CONTAGEM', 3),('UBERLÂNDIA', 3);

-- INSERT DAS CIDADES DA BAHIA
INSERT INTO CIDADE (NOME, COD_ESTADO) 
	VALUES('SALVADOR', 4),('FEIRA DE SANTANA', 4),('CAMAÇARI', 4);

-- INSERT DAS CIDADES DE PERNAMBUCO
INSERT INTO CIDADE (NOME, COD_ESTADO) 
	VALUES('RECIFE', 5),('OLINDA', 5),('CARUARU', 5);